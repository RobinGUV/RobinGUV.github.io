<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PersÃ¶nliche Startseite</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <div class="header-inner">
      <h1 class="site-title">Robin â€” GeoInformatik & Web-Maps</h1>

      <div class="header-controls" role="navigation" aria-label="Hauptnavigation">
        <div class="tab-list" role="tablist" aria-label="Main sections">
          <button role="tab" aria-selected="true" aria-controls="panel-about" id="tab-about">About</button>
          <button role="tab" aria-selected="false" aria-controls="panel-news" id="tab-news">News</button>
          <button role="tab" aria-selected="false" aria-controls="panel-projects" id="tab-projects">Projekte</button>
        </div>

        <button id="theme-toggle" aria-pressed="false" aria-label="Toggle night mode" title="Enable night mode">ðŸŒ™</button>
      </div>
    </div>

    <div class="tab-indicator" aria-hidden="true"></div>
  </header>

  <main>
    <div class="tabs" id="main-tabs">
      <div class="tab-panels">
        <section id="panel-about" class="tab-panel" role="tabpanel" aria-hidden="false" tabindex="0" aria-labelledby="tab-about">
          <article class="section-card about-grid">
            <div class="about-text">
              <h2>About</h2>
              <p>Ich studiere GeoInformatik und entwickle webbasierte Kartenanwendungen. Meine Arbeit umfasst Datenauswertung, Visualisierung und interaktive Webâ€‘Maps.</p>
              <p>Aktuell beschÃ¤ftige ich mich mit Vegetationsanalyse, Kartenâ€‘APIs und responsive Webâ€‘UIs. Mehr Projekte findest du im Reiter "Projekte".</p>

              <h3>Kontakt</h3>
              <p><a href="mailto:info@example.com">info@example.com</a></p>
            </div>

            <figure class="about-figure" aria-hidden="false">
              <img src="assets/ChatGPT Image 28. Okt. 2025, 14_10_15.png" alt="Portrait von Robin">
              <figcaption>Robin â€” student & map enthusiast</figcaption>
            </figure>
          </article>
        </section>

        <!-- News: dynamisch aus assets/news.json -->
        <section id="panel-news" class="tab-panel" role="tabpanel" aria-hidden="true" tabindex="0" aria-labelledby="tab-news">
          <article class="section-card">
            <h2>News</h2>
            <div id="news-container" aria-live="polite">
              <p class="muted">News werden geladenâ€¦</p>
            </div>
          </article>
        </section>

        <!-- Projekte -->
        <section id="panel-projects" class="tab-panel" role="tabpanel" aria-hidden="true" tabindex="0" aria-labelledby="tab-projects">
          <article class="section-card">
            <h3>Galerie</h3>
            <div class="gallery" aria-hidden="false">
              <!-- Projekt 1: eingebettete Karte (map_1) -->
              <article class="card">
                <div class="card-media">
                  <iframe src="assets/map_1_basiskarte.html" title="Karte 1" style="width:100%;height:280px;border:0;" loading="lazy"></iframe>
                </div>
                <h3><a href="assets/map_1_basiskarte.html" target="_blank" rel="noopener noreferrer">Web-Map 1</a></h3>
                <p>Kurze Beschreibung der Web-Map mit Layer-Integration.</p>
                <span class="meta">Map</span>
              </article>

              <!-- Projekt 2: eingebettete Karte (map_2) -->
              <article class="card">
                <div class="card-media">
                  <iframe src="assets/map_2_punkte.html" title="Karte 2" style="width:100%;height:280px;border:0;" loading="lazy"></iframe>
                </div>
                <h3><a href="assets/map_2_punkte.html" target="_blank" rel="noopener noreferrer">Visualisierung</a></h3>
                <p>Interaktive Visualisierung rÃ¤umlicher Daten.</p>
                <span class="meta">Viz</span>
              </article>

              <!-- Projekt 3: eingebettete Karte (map_3) -->
              <article class="card">
                <div class="card-media">
                  <iframe src="assets/map_3_reiseroute.html" title="Karte 3" style="width:100%;height:280px;border:0;" loading="lazy"></iframe>
                </div>
                <h3><a href="assets/map_3_reiseroute.html" target="_blank" rel="noopener noreferrer">Analyse-Tool</a></h3>
                <p>Tool zur automatisierten Datenauswertung.</p>
                <span class="meta">Tool</span>
              </article>

              <!-- Projekt 4: neue Karte (map_4) -->
              <article class="card">
                <div class="card-media">
                  <iframe src="assets/map_4_flaechen_online.html" title="Karte 4" style="width:100%;height:280px;border:0;" loading="lazy"></iframe>
                </div>
                <h3><a href="assets/map_4_flaechen_online.html" target="_blank" rel="noopener noreferrer">Projekt 4 â€” Karte 4</a></h3>
                <p>Neue Karte: FlÃ¤chenanalyse online.</p>
                <span class="meta">Map</span>
              </article>

              <!-- Projekt 5: 3D GebÃ¤ude Deutschland -->
              <article class="card">
                <div class="card-media">
                  <iframe src="assets/map_5_3d_buildings.html" title="3D GebÃ¤ude Deutschland" style="width:100%;height:280px;border:0;" loading="lazy"></iframe>
                </div>
                <h3><a href="assets/map_5_3d_buildings.html" target="_blank" rel="noopener noreferrer">3D GebÃ¤ude Deutschland</a></h3>
                <p>Interaktive 3D-Visualisierung der GebÃ¤ude in Deutschland mit Cesium.</p>
                <span class="meta">3D</span>
              </article>
            </div>
          </article>
        </section>
      </div>
    </div>
  </main>

  <script>
  (function () {
    const tabList = document.querySelector('.tab-list');
    const tabs = Array.from(tabList.querySelectorAll('[role="tab"]'));
    const panels = Array.from(document.querySelectorAll('.tab-panel'));
    const indicator = document.querySelector('.tab-indicator');

    function updateIndicator(targetBtn) {
      if (!indicator || !targetBtn) return;
      const listRect = tabList.getBoundingClientRect();
      const btnRect = targetBtn.getBoundingClientRect();
      const left = btnRect.left - listRect.left;
      indicator.style.width = btnRect.width + 'px';
      indicator.style.transform = 'translateX(' + left + 'px)';
    }

    function activateTab(index, setFocus = false) {
      tabs.forEach((t, i) => {
        const selected = i === index;
        t.setAttribute('aria-selected', selected ? 'true' : 'false');
        t.tabIndex = selected ? 0 : -1;
      });
      panels.forEach((p, i) => {
        p.setAttribute('aria-hidden', i === index ? 'false' : 'true');
      });
      updateIndicator(tabs[index]);
      if (setFocus) tabs[index].focus();
    }

    const startIndex = tabs.findIndex(t => t.getAttribute('aria-selected') === 'true');
    activateTab(startIndex >= 0 ? startIndex : 0);

    tabs.forEach((btn, idx) => {
      btn.addEventListener('click', () => activateTab(idx, true));
      btn.addEventListener('keydown', (e) => {
        let newIndex = idx;
        if (e.key === 'ArrowRight') newIndex = (idx + 1) % tabs.length;
        if (e.key === 'ArrowLeft') newIndex = (idx - 1 + tabs.length) % tabs.length;
        if (e.key === 'Home') newIndex = 0;
        if (e.key === 'End') newIndex = tabs.length - 1;
        if (newIndex !== idx) {
          e.preventDefault();
          activateTab(newIndex, true);
        }
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          activateTab(idx, true);
        }
      });
    });

    window.addEventListener('resize', () => {
      const activeIdx = tabs.findIndex(t => t.getAttribute('aria-selected') === 'true');
      updateIndicator(tabs[activeIdx] || tabs[0]);
    });

    setTimeout(() => {
      const activeIdx = tabs.findIndex(t => t.getAttribute('aria-selected') === 'true') || 0;
      updateIndicator(tabs[activeIdx]);
    }, 40);
  })();

  (function () {
    const toggle = document.getElementById('theme-toggle');
    const root = document.documentElement;
    const KEY = 'theme';
    const stored = localStorage.getItem(KEY);
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

    function setDark(on) {
      if (on) {
        root.setAttribute('data-theme', 'dark');
        toggle.textContent = 'â˜€';
        toggle.setAttribute('aria-pressed', 'true');
        toggle.title = 'Disable night mode';
      } else {
        root.removeAttribute('data-theme');
        toggle.textContent = 'ðŸŒ™';
        toggle.setAttribute('aria-pressed', 'false');
        toggle.title = 'Enable night mode';
      }
    }

    if (stored === 'dark' || (!stored && prefersDark)) setDark(true); else setDark(false);

    toggle.addEventListener('click', function () {
      const isDark = root.getAttribute('data-theme') === 'dark';
      setDark(!isDark);
      localStorage.setItem(KEY, !isDark ? 'dark' : 'light');
    });
  })();
  </script>

  <!-- News loader: lÃ¤dt assets/news.json (Live Server / http required) -->
  <script>
  (function () {
    const NEWS_JSON = 'assets/news.json';
    const PLACEHOLDER = 'https://placehold.co/400x250?text=No+Image';
    const container = document.getElementById('news-container');

    function fmtDate(iso) {
      try {
        return new Intl.DateTimeFormat(navigator.language || 'de-DE', { year:'numeric', month:'short', day:'numeric' }).format(new Date(iso));
      } catch (e) { return iso || ''; }
    }

    function makeNode(item) {
      const art = document.createElement('article');
      art.className = 'news-item';

      const fig = document.createElement('figure');
      fig.className = 'news-media';
      const img = document.createElement('img');
      img.src = item.image || PLACEHOLDER;
      img.alt = item.title || 'News Bild';
      fig.appendChild(img);

      const body = document.createElement('div');
      body.className = 'news-body';

      const h3 = document.createElement('h3');
      if (item.link) {
        const a = document.createElement('a');
        a.href = item.link;
        a.target = '_blank';
        a.rel = 'noopener noreferrer';
        a.textContent = item.title || '(kein Titel)';
        h3.appendChild(a);
      } else {
        h3.textContent = item.title || '(kein Titel)';
      }

      const time = document.createElement('time');
      time.className = 'news-date';
      time.dateTime = item.date || '';
      time.textContent = item.date ? fmtDate(item.date) : '';

      const p = document.createElement('p');
      p.textContent = item.summary || '';

      body.appendChild(h3);
      if (time.textContent) body.appendChild(time);
      body.appendChild(p);

      art.appendChild(fig);
      art.appendChild(body);
      return art;
    }

    async function loadNews() {
      if (!container) return;
      container.innerHTML = '<p class="muted">News werden geladenâ€¦</p>';
      try {
        const res = await fetch(NEWS_JSON, { cache: 'no-store' });
        if (!res.ok) throw new Error('HTTP ' + res.status);
        const data = await res.json();
        if (!Array.isArray(data) || data.length === 0) {
          container.innerHTML = '<p class="muted">Keine News verfÃ¼gbar.</p>';
          return;
        }
        data.sort((a,b) => new Date(b.date) - new Date(a.date));
        const list = document.createElement('div');
        list.className = 'news-list';
        data.forEach(item => list.appendChild(makeNode(item)));
        container.innerHTML = '';
        container.appendChild(list);
      } catch (err) {
        console.error('News error:', err);
        container.innerHTML = '<p class="muted">News konnten nicht geladen werden. Bitte Live Server / http verwenden.</p>';
      }
    }

    loadNews();
  })();
  </script>

  <!-- Kontakt-Floating-Buttons (rechts unten) -->
  <div class="contact-floating" aria-label="Kontakt">
    <a class="contact-btn" href="mailto:info@example.com" title="E-Mail" aria-label="Eâ€‘Mail">
      <!-- Envelope SVG -->
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false">
        <path d="M3 6.5v11A2.5 2.5 0 0 0 5.5 20h13a2.5 2.5 0 0 0 2.5-2.5v-11A2.5 2.5 0 0 0 18.5 4h-13A2.5 2.5 0 0 0 3 6.5z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M21 6.5l-9 6-9-6" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </a>

    <a class="contact-btn" href="https://github.com/RobinGUV" target="_blank" rel="noopener noreferrer" title="GitHub" aria-label="GitHub">
      <!-- GitHub SVG -->
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false">
        <path d="M12 .5a12 12 0 0 0-3.79 23.4c.6.11.82-.26.82-.58v-2.03c-3.34.73-4.04-1.6-4.04-1.6-.55-1.4-1.35-1.77-1.35-1.77-1.1-.75.08-.74.08-.74 1.22.09 1.86 1.25 1.86 1.25 1.08 1.85 2.84 1.32 3.53 1.01.11-.78.42-1.32.76-1.62-2.66-.3-5.46-1.33-5.46-5.93 0-1.31.47-2.38 1.24-3.22-.12-.3-.54-1.52.12-3.16 0 0 1-.32 3.3 1.23A11.4 11.4 0 0 1 12 6.8c1.02.01 2.05.14 3.01.41 2.3-1.55 3.3-1.23 3.3-1.23.66 1.64.24 2.86.12 3.16.77.84 1.24 1.91 1.24 3.22 0 4.61-2.8 5.62-5.47 5.92.43.37.81 1.09.81 2.2v3.26c0 .32.22.7.83.58A12 12 0 0 0 12 .5z" fill="currentColor"/>
      </svg>
    </a>

    <a class="contact-btn" href="https://www.linkedin.com/" target="_blank" rel="noopener noreferrer" title="LinkedIn" aria-label="LinkedIn">
      <!-- LinkedIn SVG -->
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false">
        <path d="M4.98 3.5A2.5 2.5 0 1 0 4.98 8.5 2.5 2.5 0 0 0 4.98 3.5zM3 9h4v12H3zM9 9h3.75v1.65h.05c.52-.99 1.8-2.03 3.7-2.03 3.95 0 4.68 2.6 4.68 5.98V21H19v-5.2c0-1.24-.02-2.84-1.73-2.84-1.73 0-1.99 1.35-1.99 2.75V21H11V9z" fill="currentColor"/>
      </svg>
    </a>
  </div>

</body>
</html>